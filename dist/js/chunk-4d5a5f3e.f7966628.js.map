{"version":3,"sources":["webpack:///./src/views/Onboarding-5.vue?d579","webpack:///./src/views/Onboarding-5.vue?d827","webpack:///src/views/Onboarding-5.vue","webpack:///./src/views/Onboarding-5.vue?a860","webpack:///./src/views/Onboarding-5.vue?09c1"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","attrs","on","$event","selectedFile","directives","name","rawName","value","expression","domProps","target","composing","text","filtered_table_json","selectRow","applyFilter","staticRenderFns","csv","components","PageChanger","JsonCSV","data","user_data","table_json","input_json","compiled_json","filtered_json","role","role_empty","mounted","methods","console","log","row","file","$refs","myFile","files","reader","FileReader","readAsText","onload","onerror","error","evt","prop_contains","new_el","do_include","property","i","includes","set_data","detect_errors","save_data","getUserData","writeUserData","component"],"mappings":"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","file":"js/chunk-4d5a5f3e.f7966628.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Onboarding-5.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"main-container bg-gray-custom justify-content-center\"},[_c('div',{staticClass:\"row justify-content-center form-body\"},[_c('div',{staticClass:\"col-10\"},[_c('div',{staticClass:\"card shadow-lg p-5 my-5\"},[_c('h3',{staticClass:\"h4 text-success font-weight-bold mb-1\"},[_vm._v(\" There are 4 types of Volunteer Roles. \")]),_c('input',{ref:\"myFile\",attrs:{\"type\":\"file\"},on:{\"change\":function($event){return _vm.selectedFile()}}}),_c('br'),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],domProps:{\"value\":(_vm.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}}),_c('div',{staticClass:\"table-div\"},[_c('b-table',{attrs:{\"striped\":\"\",\"hover\":\"\",\"items\":_vm.filtered_table_json,\"selectable\":\"\",\"select-mode\":\"single\",\"selected-variant\":\"primary\"},on:{\"row-clicked\":_vm.selectRow}})],1),_c('button',{staticClass:\"btn btn-primary\",on:{\"click\":function($event){return _vm.applyFilter()}}},[_vm._v(\" Apply filter. \")]),_c('JsonCSV',{staticClass:\"btn btn-primary\",attrs:{\"data\":_vm.filtered_table_json,\"name\":\"location-data.csv\"}},[_vm._v(\" Download Data As CSV \"),_c('img',{attrs:{\"src\":\"download_icon.png\"}})]),_c('br'),_c('br'),_c('PageChanger',{attrs:{\"page\":4}})],1)])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <div class=\"main-container bg-gray-custom justify-content-center\">\n      <div class=\"row justify-content-center form-body\">\n        <div class=\"col-10\">\n          <div class=\"card shadow-lg p-5 my-5\">\n           \n           <!-- Learn about the different roles (heading) -->\n            <h3 class=\"h4 text-success font-weight-bold mb-1\">\n              There are 4 types of Volunteer Roles.\n            </h3>\n            <input type=\"file\" ref=\"myFile\" @change=\"selectedFile()\"><br/>\n            <textarea v-model=\"text\"></textarea>\n\n            <div class=\"table-div\">\n              <b-table striped hover :items=\"filtered_table_json\" \n              @row-clicked=\"selectRow\" selectable select-mode=\"single\" \n              selected-variant = \"primary\">\n                <!-- <template #cell(actions)=\"row\">\n                  <b-button size=\"sm\" @click=\"info(row.item, row.index, $event.target)\" class=\"mr-1\">\n                    Info modal\n                  </b-button>\n                </template> -->\n              </b-table>\n            </div>\n\n            <button class=\"btn btn-primary\" @click=\"applyFilter()\">\n                Apply filter.\n            </button>\n\n            <JsonCSV class=\"btn btn-primary\" :data=\"filtered_table_json\" name=\"location-data.csv\">\n              Download Data As CSV\n              <img src=\"download_icon.png\">\n          </JsonCSV>\n\n            <!-- Spacing -->\n            <br />\n            <br />\n\n            <!-- Page changing UI -->\n            <PageChanger v-bind:page=\"4\"/>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n//import { json } from 'express';\n//import \"bootstrap/dist/js/bootstrap.bundle\";\nimport firebase from \"firebase/app\";\nimport 'firebase/auth';\nimport 'firebase/database';\n\nimport PageChanger from \"../components/PageChanger\";\nimport JsonCSV from 'vue-json-csv'\n\nvar csv = require('csvtojson');\n\nexport default {\n  name: \"Onboarding-5\",\n  components: {\n    PageChanger,\n    JsonCSV\n  },\n  data() {\n    return{\n      user_data: null,\n\n      text: \"\",\n      filtered_table_json: null,\n      table_json: null,\n\n\n      input_json: null,\n      compiled_json: {},\n      filtered_json: {},\n\n      role: \"\",\n      role_empty: false,\n    }\n  },\n  async created() {\n    // Check if firebase is initialized, and if not, initialize it\n    if (firebase.apps.length === 0) {\n      const firebaseConfig = {\n        apiKey: \"AIzaSyDlpces85D7-q4YXqQvk6Sd7K4ns_hxzIc\",\n        authDomain: \"bthc-volunteer-manager.firebaseapp.com\",\n        databaseURL: \"https://bthc-volunteer-manager-default-rtdb.firebaseio.com\",\n        projectId: \"bthc-volunteer-manager\",\n        storageBucket: \"bthc-volunteer-manager.appspot.com\",\n        messagingSenderId: \"460312984962\",\n        appId: \"1:460312984962:web:929cdb4bca23cea6dd239b\",\n        measurementId: \"G-YKPGZTFHW2\",\n      };\n\n      await firebase.default.initializeApp(firebaseConfig);\n    }\n  },\n  mounted() {\n    let self = this;\n    firebase.auth().onAuthStateChanged(function(user) {\n        if (user) {\n            // Set user_data and check for updates to it\n            self.getUserData(user.uid);\n            //self.initLoop()\n        }\n        else {\n            // No user is signed in.\n            console.log(\"Error: No user is signed in!\");\n        }\n    });\n  },\n  methods: {\n    selectRow(row){\n      console.log(row[\"Site Name\"]);\n      console.log(row);\n    },\n    selectedFile() {\n\n      //open file    \n      var file = this.$refs.myFile.files[0];\n      \n      if(!file){\n        console.log(\"Error reading file!\");\n        return;\n      }\n\n      var reader = new FileReader();\n      reader.readAsText(file, \"UTF-8\");\n      reader.onload =  evt => {\n        this.text = evt.target.result;\n\n        //read json from csv\n        csv()\n          .fromString(this.text)\n          .then((jsonObj)=>{\n              this.input_jsonm = jsonObj;\n              console.log(this.input_jsonm);\n          })\n      }     \n\n      //check read error\n      reader.onerror = evt => {\n        console.error(evt);\n      }\n\n    //add changes\n\n      \n    },\n\n    applyFilter() {\n      \n      var prop_contains = {City: \"Boston\"};\n      var filtered_table_json = [];\n\n      for(var i = 0; i < this.table_json.length; i++){\n        \n        var new_el = {};\n        var do_include = true;\n\n        for (const property in this.table_json[i]) {\n\n          new_el[property] = this.table_json[i][property];\n          if(property in prop_contains){\n            if (!this.table_json[i][property].includes(prop_contains[property])){\n              do_include = false;\n            }\n          }\n        }\n\n        if(do_include)\n          filtered_table_json.push(new_el);\n      }\n\n      console.log(filtered_table_json);\n      this.filtered_table_json = filtered_table_json;\n    \n    },\n    set_data: function(){\n      if (this.user_data === null)\n        return;\n      // if (this.user_data.vol_role)\n      //   this.role = this.vol_role;\n    },\n    detect_errors: function() {\n      // this.errors = false;\n      // this.saved = false;\n      // this.role_empty = false;\n\n      // if (this.role.length === 0){\n      //   this.role_empty = true;\n      //   this.errors = true;\n      // }\n\n      // if (!this.errors) {\n      //   this.saved = true;\n      // }\n    },\n    save_data: async function(){\n      this.detect_errors();\n\n      if (this.saved) {\n        //await this.writeUserData();\n      }\n    },\n    getUserData: async function(user_uid) {\n      var data = await firebase.database().ref('user-data/' + user_uid).once('value').then((snapshot) => {\n          return snapshot.val();\n      });\n      this.user_data = data;\n      this.set_data();\n    },\n    writeUserData: async function() {\n      var data = {\n        vol_role: this.role,\n        onboarding_stage: 5\n      };\n\n      console.log(this.user_data.uid);\n      await firebase.database().ref('user-data/' + this.user_data.uid).update(data, function(error) {\n            if (error) {\n                // The write failed...\n                console.log(\"Error: Could not update user data!\");\n                console.log(error);\n                return false;\n            }\n            else {\n                // Data saved successfully!\n                return true;\n            }\n        });\n    }\n  }\n};\n</script>\n\n<style>\n.main-container {\n  min-height: 100vh;\n  height: 100%;\n  /* overflow-x: visible; */\n  display: flex;\n  position: relative;\n}\n.form-body {\n  width: 100%;\n}\n.bg-gray-custom {\n  background-color: #e9ecef;\n}\n.text-center {\n  text-align: center;\n}\n.floating-card{\n  padding-top: 30px;\n  padding-bottom: 14px;\n    font-size: 16px;\n}\n.table-div {\n  overflow: scroll;\n  height: 60vh;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Onboarding-5.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Onboarding-5.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Onboarding-5.vue?vue&type=template&id=5eedc48c&\"\nimport script from \"./Onboarding-5.vue?vue&type=script&lang=js&\"\nexport * from \"./Onboarding-5.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Onboarding-5.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}