{"remainingRequest":"C:\\Users\\Jagdeep\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Jagdeep\\Documents\\GitHub\\BTHC-Volunteer-Manager\\src\\views\\SecondUrl.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Jagdeep\\Documents\\GitHub\\BTHC-Volunteer-Manager\\src\\views\\SecondUrl.vue","mtime":1610319276042},{"path":"C:\\Users\\Jagdeep\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Jagdeep\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\Jagdeep\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Jagdeep\\AppData\\Roaming\\npm\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgZmlyZWJhc2UgZnJvbSAiZmlyZWJhc2UvYXBwIjsNCmltcG9ydCAnZmlyZWJhc2UvYXV0aCc7DQppbXBvcnQgJ2ZpcmViYXNlL2RhdGFiYXNlJzsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnc2Vjb25kJywNCiAgY29tcG9uZW50czogew0KICB9LA0KICBtb3VudGVkKCkgew0KICAgIGxldCBzZWxmID0gdGhpczsNCiAgICBmaXJlYmFzZS5hdXRoKCkub25BdXRoU3RhdGVDaGFuZ2VkKGZ1bmN0aW9uKHVzZXIpIHsNCiAgICAgICAgaWYgKHVzZXIpIHsNCiAgICAgICAgICAgIC8vIFVzZXIgaXMgc2lnbmVkIGluLCBjcmVhdGUgdXNlciBpZiBuZXcNCiAgICAgICAgICAgIGlmIChzZWxmLm5ld1VzZXIpew0KICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlVXNlcih1c2VyKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC8vIFNldCB1c2VyX2RhdGEgYW5kIGNoZWNrIGZvciB1cGRhdGVzIHRvIGl0DQogICAgICAgICAgICBzZWxmLmdldFVzZXIodXNlci51aWQpOw0KICAgICAgICAgICAgc2VsZi5pbml0TG9vcCgpDQogICAgICAgIH0NCiAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAvLyBObyB1c2VyIGlzIHNpZ25lZCBpbi4NCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFcnJvcjogTm8gdXNlciBpcyBzaWduZWQgaW4hIik7DQogICAgICAgIH0NCiAgICB9KTsNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgICAgbmV3VXNlcjogdGhpcy4kY29va2llLmdldCgnaXNOZXdVc2VyJyksDQogICAgICAgICAgdXNlcl9kYXRhOiBudWxsDQogICAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAgIGNyZWF0ZVVzZXI6IGFzeW5jIGZ1bmN0aW9uKHVzZXIpIHsNCiAgICAgICAgYXdhaXQgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoJ3VzZXItZGF0YS8nICsgdXNlci51aWQpLnNldCh7DQogICAgICAgICAgICBkaXNwbGF5TmFtZTogdXNlci5kaXNwbGF5TmFtZSwNCiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLA0KICAgICAgICAgICAgdWlkOiB1c2VyLnVpZCwNCiAgICAgICAgICAgIHJvbGU6ICJ2b2x1bnRlZXIiLA0KICAgICAgICAgICAgc2l0ZTogbnVsbCwNCiAgICAgICAgICAgIHNraWxsczogbnVsbA0KICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikgew0KICAgICAgICAgICAgaWYgKGVycm9yKSB7DQogICAgICAgICAgICAgICAgLy8gVGhlIHdyaXRlIGZhaWxlZC4uLg0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJFcnJvcjogQ291bGQgbm90IGFkZCB1c2VyIHRvIGRhdGFiYXNlISIpOw0KICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICAvLyBEYXRhIHNhdmVkIHN1Y2Nlc3NmdWxseSENCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgICB9LA0KICAgICAgZ2V0VXNlcjogYXN5bmMgZnVuY3Rpb24odXNlcl91aWQpIHsNCiAgICAgICAgdmFyIGRhdGEgPSBhd2FpdCBmaXJlYmFzZS5kYXRhYmFzZSgpLnJlZigndXNlci1kYXRhLycgKyB1c2VyX3VpZCkub25jZSgndmFsdWUnKS50aGVuKChzbmFwc2hvdCkgPT4gew0KICAgICAgICAgICAgcmV0dXJuIHNuYXBzaG90LnZhbCgpOw0KICAgICAgICB9KTsNCiAgICAgICAgdGhpcy51c2VyX2RhdGEgPSBkYXRhOw0KICAgICAgfSwNCiAgICAgIGluaXRMb29wOiBhc3luYyBmdW5jdGlvbih1c2VyX2lkKSB7DQogICAgICAgIGxldCBzZWxmID0gdGhpczsNCiAgICAgICAgYXdhaXQgZmlyZWJhc2UuZGF0YWJhc2UoKS5yZWYoJ3VzZXItZGF0YS8nICsgdXNlcl9pZCkub24oJ3ZhbHVlJywgZnVuY3Rpb24oc25hcHNob3QpIHsNCiAgICAgICAgICAgIGxldCBkYXRhID0gW107DQogICAgICAgICAgICBzbmFwc2hvdC5mb3JFYWNoKGZ1bmN0aW9uKGNoaWxkU25hcHNob3QpIHsNCiAgICAgICAgICAgICAgICBkYXRhLnB1c2goY2hpbGRTbmFwc2hvdC52YWwoKSk7DQogICAgICAgICAgICAgICAgLy8gRmlsbCB0aGUgbG9jYWwgZGF0YSBwcm9wZXJ0eSB3aXRoIEZpcmViYXNlIGRhdGENCiAgICAgICAgICAgICAgICBzZWxmLnVzZXJfZGF0YSA9IGRhdGE7DQogICAgfSk7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["SecondUrl.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SecondUrl.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div>\r\n    <div id=\"thing\">\r\n        <h3>Is new user: {{ newUser }}</h3>\r\n        <h3>User data: {{ user_data }}</h3>\r\n        <router-link to='/third'>\r\n            <button>Take me to Third Page!</button>\r\n        </router-link>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport firebase from \"firebase/app\";\r\nimport 'firebase/auth';\r\nimport 'firebase/database';\r\n\r\nexport default {\r\n  name: 'second',\r\n  components: {\r\n  },\r\n  mounted() {\r\n    let self = this;\r\n    firebase.auth().onAuthStateChanged(function(user) {\r\n        if (user) {\r\n            // User is signed in, create user if new\r\n            if (self.newUser){\r\n                self.createUser(user);\r\n            }\r\n            // Set user_data and check for updates to it\r\n            self.getUser(user.uid);\r\n            self.initLoop()\r\n        }\r\n        else {\r\n            // No user is signed in.\r\n            console.log(\"Error: No user is signed in!\");\r\n        }\r\n    });\r\n  },\r\n  data() {\r\n      return {\r\n          newUser: this.$cookie.get('isNewUser'),\r\n          user_data: null\r\n      }\r\n  },\r\n  methods: {\r\n      createUser: async function(user) {\r\n        await firebase.database().ref('user-data/' + user.uid).set({\r\n            displayName: user.displayName,\r\n            email: user.email,\r\n            uid: user.uid,\r\n            role: \"volunteer\",\r\n            site: null,\r\n            skills: null\r\n        }, function(error) {\r\n            if (error) {\r\n                // The write failed...\r\n                console.log(\"Error: Could not add user to database!\");\r\n                console.log(error);\r\n                return false;\r\n            }\r\n            else {\r\n                // Data saved successfully!\r\n                return true;\r\n            }\r\n        });\r\n      },\r\n      getUser: async function(user_uid) {\r\n        var data = await firebase.database().ref('user-data/' + user_uid).once('value').then((snapshot) => {\r\n            return snapshot.val();\r\n        });\r\n        this.user_data = data;\r\n      },\r\n      initLoop: async function(user_id) {\r\n        let self = this;\r\n        await firebase.database().ref('user-data/' + user_id).on('value', function(snapshot) {\r\n            let data = [];\r\n            snapshot.forEach(function(childSnapshot) {\r\n                data.push(childSnapshot.val());\r\n                // Fill the local data property with Firebase data\r\n                self.user_data = data;\r\n    });\r\n        });\r\n      }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n#thing {\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  text-align: center;\r\n  color: #2c3e50;\r\n  margin-top: 200px;\r\n}\r\n</style>"]}]}